var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype,n.prototype=new r},HeroGame;(function(n){var t,i=function(i){function r(r){var u=this;i.call(this,r),t=!0,this._shootEventHandler=new eg.EventHandler,this._shootEventHandler.Bind(function(){return u.Shoot()}),this._shieldEventHandler=new eg.EventHandler,this._shieldEventHandler.Bind(function(){return u.Shield()}),this._monkey=new n.Monkey(r.width/2,330,this.Input,this._shootEventHandler,this._shieldEventHandler),this._bulletProvider=new n.BulletProvider(this.Scene,this.CollisionManager),this._rockProvider=new n.RockProvider(r.width+50,348,this.Scene,this.CollisionManager),this._cloudProvider=new n.CloudProvider(r.width/4,100,129,97,this.Scene,this.Input),this._ground=new eg.Graphics.Line2d(0,380,r.width,380),this._ground.Color="white",this._gameOver=!1,this.Scene.Add(this._monkey.Sprite),this.Scene.Add(this._ground),this.CollisionManager.Monitor(this._monkey),this.CollisionManager.OnCollision.Bind(function(n,t){return u.GameOver(n,t)}),$("body").keypress(this.Pause)}return __extends(r,i),r.prototype.Pause=function(n){n.which===112&&(t=!t)},r.prototype.Update=function(n){this._gameOver||t||(this._bulletProvider.Update(n),this._monkey.Update(n),this._rockProvider.Update(n),this._cloudProvider.Update(n))},r.prototype.Shoot=function(){var n=this._monkey.Bounds.Position.X+this._monkey.Sprite.Size.Width+10,t=this._monkey.Bounds.Position.Y+10;this._bulletProvider.AddBullet(n,t)},r.prototype.Shield=function(){var i=this._monkey.Bounds.Position.X+this._monkey.Sprite.Size.Width+10,r=this._monkey.Bounds.Position.Y,t=new n.Shield(i,r);this.Scene.Add(t.Sprite),this.CollisionManager.Monitor(t),setTimeout(function(){return t.Dispose()},2e3)},r.prototype.GameOver=function(t){if(t instanceof n.Monkey){this.CollisionManager.Unmonitor(this._monkey);var i=new eg.Graphics.Text2d(this.Scene.DrawArea.width/2,this.Scene.DrawArea.height/2,"Game Over");i.FontSettings.FontFamily=eg.Graphics.Assets.FontFamily.Monospace,i.FontSettings.FontSize="60px",i.Color="white",this.Scene.Add(i),this._gameOver=!0}},r}(eg.Game);n.Game=i})(HeroGame||(HeroGame={}))